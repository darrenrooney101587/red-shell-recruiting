{% extends '_base.html' %}
{% block body %}
    <nav id="sidebar" class="bg-dark sidebar">
        <div class="sidebar-content">
            <ul class="nav flex-column" style="height: 100vh">
                <li>
                    <a href="/" type="submit" class="nav-link btn btn-link">
                        <span class="sidebar-icon">
                            {% include 'red_shell_recruiting/components/svg_components.html' with type='sidebar' %}
                        </span>
                        <span class="sidebar-text ellipsis">Red Shell Recruiting</span>
                    </a>
                    <div style="border-bottom: 1px solid rgba(255,255,255,0.3); margin-bottom: 10px"></div>
                </li>
                <li class="nav-item nav-dropdown-container">
                    <a class="nav-link flex-display space-between" style="justify-content: space-between;">
                        <div class="flex-display" style="display: flex; flex-direction: row">
                            <span class="sidebar-icon">
                                {% include 'red_shell_recruiting/components/svg_components.html' with type='quick-add'%}
                            </span>
                            <span class="sidebar-text">Candidates</span>
                        </div>
                        <div class="flex-display flex-end">
                            <span class="chevron-down">
                                {% include 'red_shell_recruiting/components/svg_components.html' with type='chevron-down' %}
                            </span>
                            <span class="chevron-up" style="display: none;">
                                {% include 'red_shell_recruiting/components/svg_components.html' with type='chevron-up' %}
                            </span>
                        </div>
                    </a>
                    <ul class="flex-display column nav-dropdown-submenu" style="display: none; margin-left:1rem; padding: 0;">
                        <li class="nav-item sub">
                            <a href="{% url 'candidate-enter' %}" class="nav-link">Enter Candidates</a>
                        </li>
                        <li class="nav-item sub">
                            <a href="{% url 'setup-2fa' %}" class="nav-link">Search Candidates</a>
                        </li>
                    </ul>
                </li>
                <li class="nav-item nav-dropdown-container">
                    <a class="nav-link flex-display space-between" style="justify-content: space-between;">
                        <div class="flex-display" style="display: flex; flex-direction: row">
                            <span class="sidebar-icon">
                                {% include 'red_shell_recruiting/components/svg_components.html' with type='cog'%}
                            </span>
                            <span class="sidebar-text">My User</span>
                        </div>
                        <div class="flex-display flex-end">
                            <span class="chevron-down">
                                {% include 'red_shell_recruiting/components/svg_components.html' with type='chevron-down' %}
                            </span>
                            <span class="chevron-up" style="display: none;">
                                {% include 'red_shell_recruiting/components/svg_components.html' with type='chevron-up' %}
                            </span>
                        </div>
                    </a>
                    <ul class="flex-display column nav-dropdown-submenu" style="display: none; margin-left:1rem; padding: 0;">
                        <li class="nav-item sub">
                            <a href="{% url 'setup-2fa' %}" class="nav-link">Setup 2FA</a>
                        </li>
                        <li class="nav-item sub">
                            <a href="{% url 'backup-tokens' %}" class="nav-link">Backup Codes</a>
                        </li>
                        <li class="nav-item sub">
                            <a href="{% url 'disable-2fa-confirmation' %}" class="nav-link">Disable 2FA</a>
                        </li>
                        <li class="nav-item sub">
                            <a href="{% url 'password-change' %}" class="nav-link">Change Password</a>
                        </li>
                    </ul>
                </li>
{#                {% if user.is_superuser %}#}
                    <li class="nav-item">
                        <a href="{% url 'mechanic-index' %}" class="nav-link" style="display: flex; align-items: center;">
                            <span class="sidebar-icon">
                                {% include 'red_shell_recruiting/components/svg_components.html' with type='plug-and-play'%}
                            </span>
                            <span class="sidebar-text">Mechanic</span>
                        </a>
                    </li>
{#                {% endif %}#}
                <div style="border-bottom: 1px solid rgba(255,255,255,0.3); margin-bottom: 10px; margin-top: 10px"></div>
                <li class="nav-item" style="margin-top: auto">
                    <div style="border-bottom: 1px solid rgba(255,255,255,0.3); margin-bottom: 10px; margin-top: 10px"></div>
                    <form  action="{% url 'logout' %}" method="post" style="padding: 10px 10px 20px 10px;">
                        {% csrf_token %}
                        <button type="submit" class="nav-link btn btn-link" style="display: flex; align-items: center; background: none; border: none; padding: 0;">
                            <span class="sidebar-icon">
                                {% include 'red_shell_recruiting/components/svg_components.html' with type='logout' %}
                            </span>
                            <div class="sidebar-text" style="display: flex; flex-direction: row">
                                <span>Logout</span>
                            </div>
                        </button>
                    </form>
                </li>
            </ul>
        </div>
        <div class="sidebar-text" style="display: flex; justify-content: center; border-top: 1px solid rgba(255,255,255,0.3); padding-top: 10px;">
            <span style="color: #767A84;">Version: {{ git_tag }}</span>
        </div>
    </nav>
    <main id="main-content" class="content-container col-md-12 ml-sm-auto col-lg-12 pt-3" style="padding-left: 75px">
        {% for message in messages %}
            <div class="alert {{ message.tags }} alert-dismissible" role="alert">
                <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
                {{ message }}
            </div>
        {% endfor %}
        {% block main %}
            {% block content %}
            {% endblock %}
        {% endblock %}
    </main>
<script>
    $(document).ready(function () {
        $(".nav-dropdown-container").hover(
            function () {
                $(this).find(".nav-dropdown-submenu").stop(true, true).slideDown(200);
                $(this).find(".chevron-down").hide();
                $(this).find(".chevron-up").show();
            },
            function () {
                $(this).find(".nav-dropdown-submenu").stop(true, true).slideUp(200);
                $(this).find(".chevron-up").hide();
                $(this).find(".chevron-down").show();
            }
        );

        $(".accordion-section .accordion").click(function() {
            $(this).toggleClass("active");
            let panel = $(this).next()
            panel.toggleClass("active");
            let caret = $(this).find('.accordion-block i');
            if(caret.hasClass("fa-angle-down")) {
                caret.removeClass('fa-angle-down').addClass('fa-angle-up')
            } else {
                caret.removeClass('fa-angle-up').addClass('fa-angle-down')
            }
        });

    });
</script>
{% endblock %}
